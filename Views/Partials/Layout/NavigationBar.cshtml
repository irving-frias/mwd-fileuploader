@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@using Michel.Controllers;

@{
    var myUser = System.Web.Security.Membership.GetUser();
    var mymember = Members.GetCurrentMember();

}

<header class="custom-navbar">
    <div class="navbar-container">

        <div class="brand-logo">
            <a href="/">
                <span>
                    MWD
                </span>
            
            </a>
        </div>

        <div class="login-or-logout">

            @if (Umbraco.MemberIsLoggedOn())
            {
                using (Html.BeginUmbracoForm("SubmitLogout", "Member", System.Web.Mvc.FormMethod.Post, new { id = "logout" }))
                {
                    @Html.AntiForgeryToken()

                    if (myUser != null)
                    {
                        <button type="submit">
                            <span class="iconify" data-icon="simple-line-icons:login" data-inline="false"></span>
                            Logout
                        </button>

                    } 
                }   
            } else {
                <a href="/login-page">
                    <span class="iconify" data-icon="simple-line-icons:login" data-inline="false"></span>
                    Sign In
                </a>
            }

        </div>

        <div class="user-info">
            <a href="/">
                <span>
                    @if (myUser != null) {

                        <span class="iconify" data-icon="simple-line-icons:user" data-inline="false"></span> 
                        @mymember.GetPropertyValue("fullName").ToString()
                    }
                </span>
            </a>
        </div>

    </div>
</header>